A creature mostly obscured from line of sight (standing behind a tree, a larger ally, a knocked over table, in poor lighting, etc.) has **Cover** and imposes disadvantage on attacks against them. 
A creature completely obscured from view has **Full Cover** and cannot typically be targeted by an attack. 

To hide in combat, you must have Cover from the creatures you are attempting to hide from and use an action to make a **DC 15 Stealth** check (if you have Full Cover, you succeed automatically). 
The first attack you make while hidden is made with advantage, then you are no longer hidden. 
If this attack kills the enemy and no other enemy can see you, you may remain hidden instead.